"""Kata url: https://www.codewars.com/kata/5d26721d48430e0016914faa."""
from typing import Generator


def binary_cycle() -> Generator[int, None, None]:
    while True:
        yield 0
        yield 1


def paper_fold() -> Generator[int, None, None]:
    seq = [1]

    for i in range(20):
        b = binary_cycle()
        new_seq = [1]
        for j in seq:
            new_seq.extend((j, next(b)))
        seq = new_seq

    i = 0
    while True:
        yield seq[i]
        i += 1


def test_paper_fold():
    p = paper_fold()
    assert [next(p) for _ in range(20)] == [
        1, 1, 0, 1, 1, 0, 0, 1, 1, 1, 0, 0, 1, 0, 0, 1, 1, 1, 0, 1
    ]

    paper_fold_1000 = (
        "1101100111001001110110001100100111011001110010001101100011001001110110"
        "0111001001110110001100100011011001110010001101100011001001110110011100"
        "1001110110001100100111011001110010001101100011001000110110011100100111"
        "0110001100100011011001110010001101100011001001110110011100100111011000"
        "1100100111011001110010001101100011001001110110011100100111011000110010"
        "0011011001110010001101100011001000110110011100100111011000110010011101"
        "1001110010001101100011001000110110011100100111011000110010001101100111"
        "0010001101100011001001110110011100100111011000110010011101100111001000"
        "1101100011001001110110011100100111011000110010001101100111001000110110"
        "0011001001110110011100100111011000110010011101100111001000110110001100"
        "1000110110011100100111011000110010001101100111001000110110001100100011"
        "0110011100100111011000110010011101100111001000110110001100100111011001"
        "1100100111011000110010001101100111001000110110001100100011011001110010"
        "0111011000110010011101100111001000110110001100100011011001110010011101"
        "10001100100011011001"
    )

    p = paper_fold()
    assert [next(p) for _ in range(1000)] == list(map(int, paper_fold_1000))
    
